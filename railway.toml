[build]
builder = "nixpacks"

# Service 1: Backend (Flywheel)
[service.backend]
path = "/"
buildCommand = "npm install && npm run build"
startCommand = "npm start"
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 5

# Service 2: Frontend (Dashboard)
[service.client]
path = "/dashboard"
buildCommand = "npm install && npm run build"
startCommand = "npm start"
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 5
variablePolicy = "Shared" 
# Shared variables allow frontend to access public vars if needed, 
# but usually we want explicit linking. Railway TOML doesn't fully support 
# cross-service linking automatically in all tiers, but defining them splits them.
